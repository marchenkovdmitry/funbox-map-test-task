(this["webpackJsonpfunbox-map"]=this["webpackJsonpfunbox-map"]||[]).push([[0],{27:function(e,t,n){e.exports=n(49)},42:function(e,t,n){},43:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(7),c=n.n(a),i=n(3),u=n(25),s=n(22),l=n.n(s),m=n(12),f=(n(42),Object(m.b)((function(e){var t=e.value,n=e.children;return o.a.createElement("li",{className:"sortable-list-item"},t,n)}))),d=(n(43),function(e){return o.a.createElement("svg",{width:"41",height:"40",viewBox:"0 0 41 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M20.5 36.6667C29.7048 36.6667 37.1667 29.2048 37.1667 20C37.1667 10.7953 29.7048 3.33337 20.5 3.33337C11.2953 3.33337 3.83337 10.7953 3.83337 20C3.83337 29.2048 11.2953 36.6667 20.5 36.6667Z",strokeLinecap:"round",strokeLinejoin:"round"}),o.a.createElement("path",{d:"M25.5 15L15.5 25",strokeLinecap:"round",strokeLinejoin:"round"}),o.a.createElement("path",{d:"M15.5 15L25.5 25",strokeLinecap:"round",strokeLinejoin:"round"}))}),p=Object(m.a)((function(e){var t=e.items,n=e.removeFunc;return o.a.createElement("ul",{className:"sortable-list"},t.map((function(e,t){return o.a.createElement(f,{index:t,value:e,key:"item-".concat(e,"-").concat(t)},o.a.createElement("button",{type:"button",onClick:function(){return n(e)},title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u043e\u0447\u043a\u0443 - ".concat(e)},o.a.createElement(d,null)))})))})),b=n(15),g=function(e){var t=e.mapRef,n=e.changeStateFunc;return o.a.createElement(b.b,{query:{apikey:"3b602e32-65d4-49cc-ab31-05d45edda876"}},o.a.createElement(b.a,{defaultState:{center:[55.75,37.57],zoom:9},width:700,height:500,modules:["multiRouter.MultiRoute","multiRouter.EditorAddon","templateLayoutFactory","coordSystem.geo","geocode","util.bounds","geoObject.addon.balloon"],onLoad:function(e){n((function(t){return Object(i.a)(Object(i.a)({},t),{},{ymaps:e})}))},instanceRef:function(e){e&&(t.current=e)}}))},v=n(26),h=n(13),y=(n(47),function(e){var t=e.ymaps,n=e.changeStateFunc;return o.a.createElement(h.c,{validate:function(e){var n=e.city;return t.geocode(n).then((function(e){if(!e.metaData.geocoder.found)return{city:"\u0422\u0430\u043a\u043e\u0433\u043e \u0433\u043e\u0440\u043e\u0434\u0430 \u043d\u0435\u0442. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u0432\u0435\u0441\u0442\u0438 \u0434\u0440\u0443\u0433\u043e\u0439."}}),(function(e){return console.error(e),{city:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."}}))},validateOnChange:!1,validateOnBlur:!1,initialValues:{city:""},onSubmit:function(e,t){var r=e.city,o=t.resetForm;n((function(e){return Object(i.a)(Object(i.a)({},e),{},{referencePoints:[].concat(Object(v.a)(e.referencePoints),[r]),referer:"ui"})})),o()}},(function(e){var t=e.errors;return o.a.createElement(h.b,{className:"city-form"},o.a.createElement("div",{className:"city-form__field"},o.a.createElement("label",{htmlFor:"city"},"\u0413\u043e\u0440\u043e\u0434"),o.a.createElement(h.a,{id:"city",name:"city",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434 \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 enter"}),t&&o.a.createElement("p",{className:"city-form__error-message"},t.city)))}))}),j=(n(48),function(){var e=Object(r.useState)({referencePoints:[],referer:"ui",ymaps:null,route:null}),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useRef)(null),s=n.referencePoints,m=n.referer,f=n.ymaps,d=n.route;return Object(r.useEffect)((function(){"map"!==m&&function(e,t,n){if(e.current){t&&e.current.geoObjects.remove(t);var r=new f.multiRouter.MultiRoute({referencePoints:n},{editorMidPointsType:"via",editorDrawOver:!1});r.editor.start(),r.model.events.add("requestsuccess",(function(){var t=r.getWayPoints(),n=[];t.each((function(e){f.geoObject.addon.balloon.get(e);var t=e.geometry.getCoordinates(),r=f.geocode(t);n.push(r),r.then((function(t){var n=t.geoObjects.get(0).properties.get("description");e.options.set({balloonContentLayout:f.templateLayoutFactory.createClass(n)})}))})),Promise.all(n).then((function(t){var n=t.reduce((function(e,t){var n=t.geoObjects.get(0),r=n.geometry.getCoordinates(),o=n.properties.get("description");return e.coords.push(r),e.points.push(o),e}),{coords:[],points:[]}),r=n.coords,o=n.points;a((function(e){return Object(i.a)(Object(i.a)({},e),{},{referencePoints:o,referer:"map"})})),e.current.setCenter(r[r.length-1])}))})),e.current.geoObjects.add(r),a((function(e){return Object(i.a)(Object(i.a)({},e),{},{route:r})}))}}(c,d,s)}),[s]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"scene"},o.a.createElement("div",{className:"user-actions"},o.a.createElement(y,{ymaps:f,changeStateFunc:a}),o.a.createElement(p,{items:s,removeFunc:function(e){return function(e){a((function(t){return Object(i.a)(Object(i.a)({},t),{},{referencePoints:t.referencePoints.filter((function(t){return t!==e})),referer:"ui"})}))}(e)},onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;a((function(e){return Object(i.a)(Object(i.a)({},e),{},{referencePoints:l()(e.referencePoints,t,n),referer:"ui"})}))}})),o.a.createElement(g,{mapRef:c,changeStateFunc:a})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.92db5e45.chunk.js.map